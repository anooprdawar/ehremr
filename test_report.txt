/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pytest_asyncio/plugin.py:247: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts ==============================
platform darwin -- Python 3.10.10, pytest-8.3.5, pluggy-1.5.0 -- /usr/local/bin/python3
cachedir: .pytest_cache
hypothesis profile 'default'
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/anoopdawar/Desktop/ehremr
configfile: pyproject.toml
plugins: integration-0.2.3, mock-3.10.0, hypothesis-6.151.9, asyncio-1.3.0, Faker-37.3.0, anyio-3.6.2, benchmark-4.0.0, cov-6.1.1, requests-mock-1.12.1
asyncio: mode=auto, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 211 items

tests/unit/test_batch_transcription.py::TestBatchTranscriberImport::test_deepgram_client_imported_directly PASSED [  0%]
tests/unit/test_batch_transcription.py::TestBatchTranscriberImport::test_no_bare_deepgram_module_import PASSED [  0%]
tests/unit/test_batch_transcription.py::TestBatchTranscriberMimetypeInSource::test_transcribe_file_passes_mimetype PASSED [  1%]
tests/unit/test_batch_transcription.py::TestNullGuardOnUtterances::test_empty_utterances_returns_empty_list PASSED [  1%]
tests/unit/test_batch_transcription.py::TestNullGuardOnUtterances::test_format_utterances_with_none_utterances PASSED [  2%]
tests/unit/test_batch_transcription.py::TestBatchTranscriberClinicalResult::test_utterances_populated PASSED [  2%]
tests/unit/test_batch_transcription.py::TestBatchTranscriberClinicalResult::test_keyterms_passed_to_options PASSED [  3%]
tests/unit/test_batch_transcription.py::TestMimetypeHelper::test_mimetype_for[.wav-audio/wav] PASSED [  3%]
tests/unit/test_batch_transcription.py::TestMimetypeHelper::test_mimetype_for[.mp3-audio/mpeg] PASSED [  4%]
tests/unit/test_batch_transcription.py::TestMimetypeHelper::test_mimetype_for[.flac-audio/flac] PASSED [  4%]
tests/unit/test_batch_transcription.py::TestMimetypeHelper::test_mimetype_for[.ogg-audio/ogg] PASSED [  5%]
tests/unit/test_batch_transcription.py::TestMimetypeHelper::test_mimetype_for[.webm-audio/webm] PASSED [  5%]
tests/unit/test_batch_transcription.py::TestMimetypeHelper::test_mimetype_for[.xyz-audio/wav] PASSED [  6%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientAuth::test_authenticate_returns_token PASSED [  6%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientAuth::test_authenticate_posts_to_token_url PASSED [  7%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientAuth::test_authenticate_uses_jwt_bearer_grant PASSED [  7%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientAuth::test_authenticate_private_key_path PASSED [  8%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientAuth::test_authenticate_raises_without_key PASSED [  8%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientSubmit::test_submit_document_reference_posts_to_fhir_endpoint PASSED [  9%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientSubmit::test_submit_includes_bearer_token PASSED [  9%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientSubmit::test_submit_without_auth_raises PASSED [  9%]
tests/unit/test_ehr_clients.py::TestEpicFHIRClientSubmit::test_submit_content_type_fhir_json PASSED [ 10%]
tests/unit/test_ehr_clients.py::TestCernerFHIRClientAuth::test_authenticate_returns_token PASSED [ 10%]
tests/unit/test_ehr_clients.py::TestCernerFHIRClientAuth::test_authenticate_client_credentials_grant PASSED [ 11%]
tests/unit/test_ehr_clients.py::TestCernerFHIRClientAuth::test_submit_document_reference_201 PASSED [ 11%]
tests/unit/test_fhir_builder.py::TestDocumentReferenceStructure::test_resource_type PASSED [ 12%]
tests/unit/test_fhir_builder.py::TestDocumentReferenceStructure::test_status_current PASSED [ 12%]
tests/unit/test_fhir_builder.py::TestDocumentReferenceStructure::test_subject_reference PASSED [ 13%]
tests/unit/test_fhir_builder.py::TestDocumentReferenceStructure::test_encounter_reference PASSED [ 13%]
tests/unit/test_fhir_builder.py::TestLOINCCode::test_loinc_code[progress_note-11506-3] PASSED [ 14%]
tests/unit/test_fhir_builder.py::TestLOINCCode::test_loinc_code[consult_note-11488-4] PASSED [ 14%]
tests/unit/test_fhir_builder.py::TestLOINCCode::test_loinc_code[discharge_summary-18842-5] PASSED [ 15%]
tests/unit/test_fhir_builder.py::TestLOINCCode::test_loinc_code[ambient-34109-9] PASSED [ 15%]
tests/unit/test_fhir_builder.py::TestLOINCCode::test_loinc_code[unknown_type-11506-3] PASSED [ 16%]
tests/unit/test_fhir_builder.py::TestBase64Encoding::test_content_base64_encoded PASSED [ 16%]
tests/unit/test_fhir_builder.py::TestBase64Encoding::test_transcript_in_content PASSED [ 17%]
tests/unit/test_fhir_builder.py::TestBase64Encoding::test_decode_content_roundtrip PASSED [ 17%]
tests/unit/test_fhir_builder.py::TestBase64Encoding::test_content_type_text_plain PASSED [ 18%]
tests/unit/test_fhir_builder.py::TestAuthorField::test_author_included_when_provided PASSED [ 18%]
tests/unit/test_fhir_builder.py::TestAuthorField::test_no_author_when_not_provided PASSED [ 18%]
tests/unit/test_fhir_builder.py::TestEmptyUtterances::test_empty_utterances_still_valid_fhir PASSED [ 19%]
tests/unit/test_fhir_builder.py::TestEmptyUtterances::test_decode_content_invalid_raises PASSED [ 19%]
tests/unit/test_fhir_client.py::TestFHIRClientPost::test_post_resource_sends_to_correct_url PASSED [ 20%]
tests/unit/test_fhir_client.py::TestFHIRClientPost::test_post_resource_sets_fhir_content_type PASSED [ 20%]
tests/unit/test_fhir_client.py::TestFHIRClientPost::test_post_resource_custom_headers_merged PASSED [ 21%]
tests/unit/test_fhir_client.py::TestFHIRClientPost::test_post_resource_strips_trailing_slash PASSED [ 21%]
tests/unit/test_fhir_client.py::TestFHIRClientGet::test_get_resource_correct_url PASSED [ 22%]
tests/unit/test_fhir_client.py::TestFHIRClientGet::test_get_resource_accept_header PASSED [ 22%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_returns_string PASSED [ 23%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_msh_segment_present PASSED [ 23%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_evn_segment_present PASSED [ 24%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_pid_segment_present PASSED [ 24%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_pv1_segment_present PASSED [ 25%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_txa_segment_present PASSED [ 25%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_obx_segment_present PASSED [ 26%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_message_type_mdm_t02 PASSED [ 26%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_patient_id_in_pid PASSED [ 27%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_provider_npi_in_pv1 PASSED [ 27%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_transcript_in_obx PASSED [ 27%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderStructure::test_hl7_parseable PASSED [ 28%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderPipeEscaping::test_pipe_in_transcript_escaped PASSED [ 28%]
tests/unit/test_hl7_mdm_builder.py::TestMDMBuilderCustomDocumentId::test_custom_document_id_used PASSED [ 29%]
tests/unit/test_hl7_mdm_builder.py::TestORUBuilderStructure::test_message_type_oru_r01 PASSED [ 29%]
tests/unit/test_hl7_mdm_builder.py::TestORUBuilderStructure::test_pid_segment_present PASSED [ 30%]
tests/unit/test_hl7_mdm_builder.py::TestORUBuilderStructure::test_obr_segment_present PASSED [ 30%]
tests/unit/test_hl7_mdm_builder.py::TestORUBuilderStructure::test_obx_segment_present PASSED [ 31%]
tests/unit/test_hl7_mdm_builder.py::TestORUBuilderStructure::test_transcript_in_obx PASSED [ 31%]
tests/unit/test_hl7_mdm_builder.py::TestORUBuilderStructure::test_hl7_parseable PASSED [ 32%]
tests/unit/test_hl7_mdm_builder.py::TestORUBuilderStructure::test_custom_loinc_code PASSED [ 32%]
tests/unit/test_streaming.py::TestStreamingImport::test_imports_live_transcription_events_directly PASSED [ 33%]
tests/unit/test_streaming.py::TestConnectionFinish::test_finish_calls_connection_finish PASSED [ 33%]
tests/unit/test_streaming.py::TestConnectionFinish::test_is_disconnected_after_finish PASSED [ 34%]
tests/unit/test_streaming.py::TestConnectionFinish::test_finish_safe_to_call_twice PASSED [ 34%]
tests/unit/test_streaming.py::TestConnectionStartCheck::test_start_failure_raises_runtime_error PASSED [ 35%]
tests/unit/test_streaming.py::TestConnectionStartCheck::test_start_success_does_not_raise PASSED [ 35%]
tests/unit/test_streaming.py::TestEventHandlers::test_error_handler_wired PASSED [ 36%]
tests/unit/test_streaming.py::TestEventHandlers::test_close_handler_wired PASSED [ 36%]
tests/unit/test_streaming.py::TestEventHandlers::test_transcript_handler_wired PASSED [ 36%]
tests/unit/test_streaming.py::TestEventHandlers::test_custom_error_handler_called PASSED [ 37%]
tests/unit/test_streaming.py::TestSendAudio::test_send_audio_calls_connection_send PASSED [ 37%]
tests/unit/test_streaming.py::TestSendAudio::test_send_audio_before_start_raises PASSED [ 38%]
tests/unit/test_use_cases.py::TestTelehealthPipeline::test_separate_speakers_provider PASSED [ 38%]
tests/unit/test_use_cases.py::TestTelehealthPipeline::test_separate_speakers_patient PASSED [ 39%]
tests/unit/test_use_cases.py::TestTelehealthPipeline::test_separate_speakers_empty PASSED [ 39%]
tests/unit/test_use_cases.py::TestTelehealthPipeline::test_to_fhir_consult_note_loinc PASSED [ 40%]
tests/unit/test_use_cases.py::TestTelehealthPipeline::test_to_fhir_correct_patient_ref PASSED [ 40%]
tests/unit/test_use_cases.py::TestTelehealthPipeline::test_to_fhir_telehealth_title PASSED [ 41%]
tests/unit/test_use_cases.py::TestContactCenterPipeline::test_to_fhir_progress_note PASSED [ 41%]
tests/unit/test_use_cases.py::TestContactCenterPipeline::test_to_fhir_triage_title PASSED [ 42%]
tests/unit/test_use_cases.py::TestContactCenterPipeline::test_to_hl7_oru PASSED [ 42%]
tests/unit/test_use_cases.py::TestBatchTranscriberURL::test_transcribe_url PASSED [ 43%]
tests/unit/test_use_cases.py::TestBatchTranscriberURL::test_format_utterances_with_content PASSED [ 43%]
tests/unit/test_use_cases.py::TestStreamingTranscriptHandler::test_on_transcript_callback_invoked PASSED [ 44%]
tests/unit/test_use_cases.py::TestStreamingTranscriptHandler::test_on_transcript_empty_text_not_fired PASSED [ 44%]
tests/unit/test_use_cases.py::TestStreamingTranscriptHandler::test_default_error_handler_writes_stderr PASSED [ 45%]
tests/unit/test_use_cases.py::TestStreamingTranscriptHandler::test_close_handler_invoked PASSED [ 45%]
tests/integration/test_ambient_documentation_flow.py::TestAmbientDocumentationPipeline::test_full_pipeline_returns_201 PASSED [ 45%]
tests/integration/test_ambient_documentation_flow.py::TestAmbientDocumentationPipeline::test_fhir_doc_ref_has_correct_patient PASSED [ 46%]
tests/integration/test_ambient_documentation_flow.py::TestAmbientDocumentationPipeline::test_transcript_content_encoded_in_fhir PASSED [ 46%]
tests/integration/test_ambient_documentation_flow.py::TestAmbientDocumentationPipeline::test_empty_encounter_still_valid PASSED [ 47%]
tests/integration/test_ehr_submission_flow.py::TestHL7SubmissionFlow::test_batch_to_hl7_mdm_parseable PASSED [ 47%]
tests/integration/test_ehr_submission_flow.py::TestHL7SubmissionFlow::test_all_required_segments_present PASSED [ 48%]
tests/integration/test_ehr_submission_flow.py::TestCernerFHIRSubmissionFlow::test_full_cerner_submission_flow PASSED [ 48%]
tests/integration/test_ehr_submission_flow.py::TestCernerFHIRSubmissionFlow::test_dictation_to_hl7_mdm PASSED [ 49%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_valid_doc_passes_schema PASSED [ 49%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_resource_type PASSED [ 50%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_status_is_current PASSED [ 50%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_doc_status_is_final PASSED [ 51%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_loinc_system_uri PASSED [ 51%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_content_type_text_plain PASSED [ 52%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_date_is_fhir_instant PASSED [ 52%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_subject_reference_pattern PASSED [ 53%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_encounter_reference_pattern PASSED [ 53%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_author_reference_pattern PASSED [ 54%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_base64_data_is_valid PASSED [ 54%]
tests/quality/test_fhir_schema_validation.py::TestBuilderProducesValidResource::test_transcript_roundtrips_through_base64 PASSED [ 54%]
tests/quality/test_fhir_schema_validation.py::TestRequiredFields::test_missing_resource_type_raises PASSED [ 55%]
tests/quality/test_fhir_schema_validation.py::TestRequiredFields::test_missing_status_raises PASSED [ 55%]
tests/quality/test_fhir_schema_validation.py::TestRequiredFields::test_missing_subject_raises PASSED [ 56%]
tests/quality/test_fhir_schema_validation.py::TestRequiredFields::test_missing_content_raises PASSED [ 56%]
tests/quality/test_fhir_schema_validation.py::TestRequiredFields::test_empty_content_list_raises PASSED [ 57%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_valid_statuses_accepted[current] PASSED [ 57%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_valid_statuses_accepted[superseded] PASSED [ 58%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_valid_statuses_accepted[entered-in-error] PASSED [ 58%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_status_rejected[active] PASSED [ 59%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_status_rejected[inactive] PASSED [ 59%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_status_rejected[CURRENT] PASSED [ 60%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_status_rejected[Current] PASSED [ 60%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_status_rejected[draft] PASSED [ 61%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_status_rejected[unknown] PASSED [ 61%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_status_rejected[] PASSED [ 62%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_valid_doc_statuses_accepted[preliminary] PASSED [ 62%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_valid_doc_statuses_accepted[final] PASSED [ 63%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_valid_doc_statuses_accepted[amended] PASSED [ 63%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_valid_doc_statuses_accepted[entered-in-error] PASSED [ 63%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_doc_status_rejected[complete] PASSED [ 64%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_doc_status_rejected[approved] PASSED [ 64%]
tests/quality/test_fhir_schema_validation.py::TestStatusCodes::test_invalid_doc_status_rejected[FINAL] PASSED [ 65%]
tests/quality/test_fhir_schema_validation.py::TestLOINCSystemValidation::test_wrong_loinc_system_uri_rejected PASSED [ 65%]
tests/quality/test_fhir_schema_validation.py::TestLOINCSystemValidation::test_missing_coding_raises PASSED [ 66%]
tests/quality/test_fhir_schema_validation.py::TestLOINCSystemValidation::test_missing_code_in_coding_raises PASSED [ 66%]
tests/quality/test_fhir_schema_validation.py::TestLOINCSystemValidation::test_all_loinc_codes_produce_correct_display[11506-3-Progress note] PASSED [ 67%]
tests/quality/test_fhir_schema_validation.py::TestLOINCSystemValidation::test_all_loinc_codes_produce_correct_display[11488-4-Consult note] PASSED [ 67%]
tests/quality/test_fhir_schema_validation.py::TestLOINCSystemValidation::test_all_loinc_codes_produce_correct_display[18842-5-Discharge summary] PASSED [ 68%]
tests/quality/test_fhir_schema_validation.py::TestLOINCSystemValidation::test_all_loinc_codes_produce_correct_display[34109-9-Note] PASSED [ 68%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_bad_subject_reference_rejected[patient-123] PASSED [ 69%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_bad_subject_reference_rejected[patient/123] PASSED [ 69%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_bad_subject_reference_rejected[/patient-123] PASSED [ 70%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_bad_subject_reference_rejected[] PASSED [ 70%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_valid_subject_references_accepted[Patient/abc123] PASSED [ 71%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_valid_subject_references_accepted[Patient/MRN-001] PASSED [ 71%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_valid_subject_references_accepted[Patient/some-uuid-here] PASSED [ 72%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_bad_encounter_reference_rejected PASSED [ 72%]
tests/quality/test_fhir_schema_validation.py::TestReferencePatterns::test_bad_author_reference_rejected PASSED [ 72%]
tests/quality/test_fhir_schema_validation.py::TestBase64Integrity::test_invalid_base64_rejected PASSED [ 73%]
tests/quality/test_fhir_schema_validation.py::TestBase64Integrity::test_valid_base64_accepted PASSED [ 73%]
tests/quality/test_fhir_schema_validation.py::TestBase64Integrity::test_multiple_errors_reported_together PASSED [ 74%]
tests/quality/test_fhir_schema_validation.py::TestBuilderInputGuards::test_empty_patient_id_raises PASSED [ 74%]
tests/quality/test_fhir_schema_validation.py::TestBuilderInputGuards::test_whitespace_patient_id_raises PASSED [ 75%]
tests/quality/test_fhir_schema_validation.py::TestBuilderInputGuards::test_empty_encounter_id_raises PASSED [ 75%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_field_separator PASSED [ 76%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_encoding_characters PASSED [ 76%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_message_type_mdm PASSED [ 77%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_trigger_event_t02 PASSED [ 77%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_version_id_251 PASSED [ 78%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_processing_id_production PASSED [ 78%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_message_control_id_nonempty PASSED [ 79%]
tests/quality/test_hl7_deep_validation.py::TestMSHSegment::test_msh_datetime_format PASSED [ 79%]
tests/quality/test_hl7_deep_validation.py::TestPIDSegment::test_pid_set_id_is_1 PASSED [ 80%]
tests/quality/test_hl7_deep_validation.py::TestPIDSegment::test_pid_patient_id_present PASSED [ 80%]
tests/quality/test_hl7_deep_validation.py::TestPIDSegment::test_pid_patient_id_domain_is_mrn PASSED [ 81%]
tests/quality/test_hl7_deep_validation.py::TestTXASegment::test_txa_set_id_is_1 PASSED [ 81%]
tests/quality/test_hl7_deep_validation.py::TestTXASegment::test_txa_document_type_contains_progress_note PASSED [ 81%]
tests/quality/test_hl7_deep_validation.py::TestTXASegment::test_txa_document_completion_status_authenticated PASSED [ 82%]
tests/quality/test_hl7_deep_validation.py::TestTXASegment::test_txa_availability_status_available PASSED [ 82%]
tests/quality/test_hl7_deep_validation.py::TestTXASegment::test_txa_unique_document_id_nonempty PASSED [ 83%]
tests/quality/test_hl7_deep_validation.py::TestTXASegment::test_txa_custom_document_id_used PASSED [ 83%]
tests/quality/test_hl7_deep_validation.py::TestOBXSegment::test_obx_set_id_is_1 PASSED [ 84%]
tests/quality/test_hl7_deep_validation.py::TestOBXSegment::test_obx_value_type_is_tx PASSED [ 84%]
tests/quality/test_hl7_deep_validation.py::TestOBXSegment::test_obx_observation_result_nonempty PASSED [ 85%]
tests/quality/test_hl7_deep_validation.py::TestOBXSegment::test_obx_clinical_text_in_value PASSED [ 85%]
tests/quality/test_hl7_deep_validation.py::TestOBXSegment::test_obx_observation_status_final PASSED [ 86%]
tests/quality/test_hl7_deep_validation.py::TestOBXSegment::test_obx_observation_identifier_has_loinc PASSED [ 86%]
tests/quality/test_hl7_deep_validation.py::TestORUFieldLevel::test_msh_message_type_oru PASSED [ 87%]
tests/quality/test_hl7_deep_validation.py::TestORUFieldLevel::test_msh_trigger_event_r01 PASSED [ 87%]
tests/quality/test_hl7_deep_validation.py::TestORUFieldLevel::test_obr_order_id_present PASSED [ 88%]
tests/quality/test_hl7_deep_validation.py::TestORUFieldLevel::test_obr_provider_npi_present PASSED [ 88%]
tests/quality/test_hl7_deep_validation.py::TestORUFieldLevel::test_obx_value_type_tx PASSED [ 89%]
tests/quality/test_hl7_deep_validation.py::TestORUFieldLevel::test_obx_status_final PASSED [ 89%]
tests/quality/test_hl7_deep_validation.py::TestORUFieldLevel::test_custom_loinc_appears_in_obr_and_obx PASSED [ 90%]
tests/quality/test_hl7_deep_validation.py::TestPipeEscapingRegression::test_mdm_with_pipe_in_transcript_parses_cleanly[BP: 120|80 mmHg] PASSED [ 90%]
tests/quality/test_hl7_deep_validation.py::TestPipeEscapingRegression::test_mdm_with_pipe_in_transcript_parses_cleanly[Ratio: 1|2|3] PASSED [ 90%]
tests/quality/test_hl7_deep_validation.py::TestPipeEscapingRegression::test_mdm_with_pipe_in_transcript_parses_cleanly[Lab: Na 140 | K 4.0 | Cl 102] PASSED [ 91%]
tests/quality/test_hl7_deep_validation.py::TestPipeEscapingRegression::test_mdm_with_pipe_in_transcript_parses_cleanly[Note|with|many|pipes] PASSED [ 91%]
tests/quality/test_hl7_deep_validation.py::TestPipeEscapingRegression::test_oru_with_pipe_in_transcript_parses_cleanly[BP: 120|80 mmHg] PASSED [ 92%]
tests/quality/test_hl7_deep_validation.py::TestPipeEscapingRegression::test_oru_with_pipe_in_transcript_parses_cleanly[Ratio: 1|2|3] PASSED [ 92%]
tests/quality/test_hl7_deep_validation.py::TestPipeEscapingRegression::test_newline_in_transcript_does_not_break_segments PASSED [ 93%]
tests/quality/test_property_based.py::TestFHIRBuilderProperties::test_from_transcript_never_raises_for_valid_ids PASSED [ 93%]
tests/quality/test_property_based.py::TestFHIRBuilderProperties::test_output_always_passes_r4_schema_validation PASSED [ 94%]
tests/quality/test_property_based.py::TestFHIRBuilderProperties::test_base64_always_roundtrips PASSED [ 94%]
tests/quality/test_property_based.py::TestFHIRBuilderProperties::test_all_doc_types_produce_valid_loinc PASSED [ 95%]
tests/quality/test_property_based.py::TestFHIRBuilderProperties::test_empty_patient_id_always_raises PASSED [ 95%]
tests/quality/test_property_based.py::TestFHIRBuilderProperties::test_subject_reference_always_valid_pattern PASSED [ 96%]
tests/quality/test_property_based.py::TestHL7BuilderProperties::test_mdm_always_parseable PASSED [ 96%]
tests/quality/test_property_based.py::TestHL7BuilderProperties::test_mdm_always_has_all_required_segments PASSED [ 97%]
tests/quality/test_property_based.py::TestHL7BuilderProperties::test_oru_always_parseable PASSED [ 97%]
tests/quality/test_property_based.py::TestHL7BuilderProperties::test_pipe_in_transcript_never_breaks_parsing PASSED [ 98%]
tests/quality/test_property_based.py::TestUtteranceModelProperties::test_utterance_construction_never_raises PASSED [ 98%]
tests/quality/test_property_based.py::TestUtteranceModelProperties::test_null_guard_holds_for_any_utterance_list PASSED [ 99%]
tests/quality/test_property_based.py::TestMimetypeProperties::test_known_extensions_return_audio_mimetype PASSED [ 99%]
tests/quality/test_property_based.py::TestMimetypeProperties::test_unknown_extension_always_returns_audio_wav PASSED [100%]

================================ tests coverage ================================
______________ coverage: platform darwin, python 3.10.10-final-0 _______________

Name                                                     Stmts   Miss  Cover   Missing
--------------------------------------------------------------------------------------
src/ehr_integration/__init__.py                              1      0   100%
src/ehr_integration/ehr/__init__.py                          4      0   100%
src/ehr_integration/ehr/base_ehr_client.py                  18      0   100%
src/ehr_integration/ehr/cerner_client.py                    12      0   100%
src/ehr_integration/ehr/epic_client.py                      24      0   100%
src/ehr_integration/fhir/__init__.py                         3      0   100%
src/ehr_integration/fhir/document_reference.py              97      1    99%   189
src/ehr_integration/fhir/fhir_client.py                     18      1    94%   42
src/ehr_integration/hl7/__init__.py                          3      0   100%
src/ehr_integration/hl7/mdm_builder.py                      34      0   100%
src/ehr_integration/hl7/oru_builder.py                      27      0   100%
src/ehr_integration/transcription/__init__.py                4      0   100%
src/ehr_integration/transcription/batch.py                  36      0   100%
src/ehr_integration/transcription/models.py                 37      2    95%   33, 63
src/ehr_integration/transcription/streaming.py              55      0   100%
src/ehr_integration/use_cases/__init__.py                    5      0   100%
src/ehr_integration/use_cases/ambient_documentation.py      15      0   100%
src/ehr_integration/use_cases/contact_center.py             11      0   100%
src/ehr_integration/use_cases/dictation.py                  15      0   100%
src/ehr_integration/use_cases/telehealth.py                 18      0   100%
--------------------------------------------------------------------------------------
TOTAL                                                      437      4    99%
============================= 211 passed in 5.34s ==============================
